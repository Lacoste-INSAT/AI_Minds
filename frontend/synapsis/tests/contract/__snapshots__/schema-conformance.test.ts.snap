// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html

exports[`Contract: Snapshot envelopes > snapshots critical response envelopes > answer-packet-envelope 1`] = `
{
  "answer": "Synapsis uses a hybrid retrieval architecture.",
  "confidence": "high",
  "confidence_score": 0.92,
  "reasoning_chain": "1. Retrieved 12 relevant chunks.
2. High confidence.",
  "sources": [
    {
      "chunk_id": "chunk-001",
      "file_name": "project-overview.md",
      "score_dense": 0.92,
      "score_final": 0.88,
      "score_sparse": 0.78,
      "snippet": "The Synapsis architecture uses a hybrid retrieval approach.",
    },
    {
      "chunk_id": "chunk-002",
      "file_name": "meeting-notes-feb12.md",
      "score_dense": 0.85,
      "score_final": 0.84,
      "score_sparse": 0.81,
      "snippet": "Decision: We will use Qdrant as the primary vector store.",
    },
    {
      "chunk_id": "chunk-003",
      "file_name": "research-paper.pdf",
      "score_dense": 0.79,
      "score_final": 0.74,
      "score_sparse": 0.65,
      "snippet": "Knowledge graphs provide a complementary retrieval signal.",
    },
  ],
  "uncertainty_reason": null,
  "verification": "APPROVE",
}
`;

exports[`Contract: Snapshot envelopes > snapshots critical response envelopes > graph-envelope 1`] = `
{
  "edges": [
    {
      "id": "e1",
      "properties": null,
      "relationship": "works_at",
      "source": "n1",
      "target": "n3",
    },
    {
      "id": "e2",
      "properties": null,
      "relationship": "works_at",
      "source": "n2",
      "target": "n3",
    },
    {
      "id": "e3",
      "properties": null,
      "relationship": "leads",
      "source": "n1",
      "target": "n4",
    },
    {
      "id": "e4",
      "properties": null,
      "relationship": "uses",
      "source": "n4",
      "target": "n5",
    },
  ],
  "nodes": [
    {
      "id": "n1",
      "mention_count": 24,
      "name": "Alice Chen",
      "properties": {
        "role": "Lead Engineer",
      },
      "type": "person",
    },
    {
      "id": "n2",
      "mention_count": 18,
      "name": "Bob Martinez",
      "properties": {
        "role": "Researcher",
      },
      "type": "person",
    },
    {
      "id": "n3",
      "mention_count": 42,
      "name": "Synapsis Lab",
      "properties": null,
      "type": "organization",
    },
    {
      "id": "n4",
      "mention_count": 31,
      "name": "Hybrid Retrieval",
      "properties": {
        "status": "active",
      },
      "type": "project",
    },
    {
      "id": "n5",
      "mention_count": 56,
      "name": "Vector Search",
      "properties": null,
      "type": "concept",
    },
  ],
}
`;

exports[`Contract: Snapshot envelopes > snapshots critical response envelopes > health-degraded-envelope 1`] = `
{
  "disk_free_gb": 128.5,
  "ollama": {
    "detail": {
      "error": "Connection refused",
    },
    "status": "down",
  },
  "qdrant": {
    "detail": {
      "collections": 2,
      "points": 2834,
    },
    "status": "up",
  },
  "sqlite": {
    "detail": {
      "size_mb": 12.4,
    },
    "status": "up",
  },
  "status": "degraded",
  "uptime_seconds": 3600,
}
`;

exports[`Contract: Snapshot envelopes > snapshots critical response envelopes > sources-config-envelope 1`] = `
{
  "exclude_patterns": [
    "*.tmp",
    "*.log",
    "node_modules",
    ".git",
  ],
  "max_file_size_mb": 50,
  "rate_limit_files_per_minute": 10,
  "scan_interval_seconds": 300,
  "watched_directories": [
    {
      "enabled": true,
      "exclude_patterns": [
        "*.tmp",
        "node_modules",
      ],
      "id": "dir-1",
      "path": "/Users/researcher/documents",
    },
    {
      "enabled": true,
      "exclude_patterns": [],
      "id": "dir-2",
      "path": "/Users/researcher/notes",
    },
  ],
}
`;

exports[`Contract: Snapshot envelopes > snapshots critical response envelopes > timeline-envelope 1`] = `
{
  "items": [
    {
      "category": "engineering",
      "entities": [
        "Synapsis",
        "Qdrant",
        "Knowledge Graph",
      ],
      "id": "tl-001",
      "ingested_at": "2025-01-01T00:00:00.000Z",
      "modality": "text",
      "source_uri": "/docs/architecture-overview.md",
      "summary": "Comprehensive document covering the hybrid retrieval architecture.",
      "title": "Synapsis Architecture Overview",
    },
    {
      "category": "meetings",
      "entities": [
        "Alice Chen",
        "Frontend Redesign",
      ],
      "id": "tl-002",
      "ingested_at": "2025-01-02T00:00:00.000Z",
      "modality": "text",
      "source_uri": "/notes/standup.md",
      "summary": "Discussed frontend progress and graph visualization approach.",
      "title": "Team Standup Notes",
    },
  ],
  "page": 1,
  "page_size": 20,
  "total": 2,
}
`;
