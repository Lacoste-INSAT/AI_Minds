graph TD

    %% =========================
    %% DATA SOURCES
    %% =========================
    subgraph "Data Sources"
        FOLDER[Watched Inbox Folder]
        NOTES[Notes Folder]
        SCREEN[Images / Screenshots]
        AUDIO[Audio Recordings]
    end

    %% =========================
    %% INGESTION MODULES
    %% =========================
    subgraph "Ingestion Module"
        WATCH[Filesystem Watcher Service]
        QUEUE[Async Processing Queue]
        INTAKE[Intake Orchestrator]
    end

    %% =========================
    %% PARSING & NORMALIZATION MODULE
    %% =========================
    subgraph "Parsing & Normalization Module"
        TXT[Text Parser PDF/DOCX/TXT]
        OCR[OCR Tesseract]
        AUD[Speech-to-Text Whisper.cpp Tiny]
        CLEAN[Content Normalizer]
    end

    %% =========================
    %% COGNITIVE ENRICHMENT MODULE
    %% =========================
    subgraph "Cognitive Enrichment Module"
        META[Metadata Extractor]
        ENT[Entity Recognition]
        CAT[Category Tagger]
        ACT[Action Item Extractor]
        SUM[Local LLM Summarizer <4B]
    end

    %% =========================
    %% MEMORY MODULE
    %% =========================
    subgraph "Memory Module"
        STRUCT[Structured DB SQLite]
        VECTOR[Vector Store Qdrant]
        GRAPH[Entity Graph]
    end

    %% =========================
    %% RETRIEVAL & REASONING MODULE
    %% =========================
    subgraph "Retrieval & Reasoning Module"
        INTENT[Intent Detector]
        RETR[Hybrid Retriever]
        CONTEXT[Context Assembler]
        LLM[LLM Reasoner <4B]
        VERIFY[Self-Verification]
        CONF[Confidence Scorer]
    end

    %% =========================
    %% API MODULE
    %% =========================
    subgraph "API Module"
        BACKEND[FastAPI Server]
    end

    %% =========================
    %% FRONTEND MODULE
    %% =========================
    subgraph "Frontend Module"
        DASH[Dashboard]
        TIMELINE[Timeline View]
        CARDS[Knowledge Cards]
        ACTIONS[Action Panel]
        CHAT[Grounded Q/A Interface]
        SOURCE[Why This Answer Panel]
    end

    %% =========================
    %% OBSERVABILITY MODULE
    %% =========================
    subgraph "Observability Module"
        LOG[Structured Logging]
        HEALTH[Health Checks]
        METRIC[Confidence Metrics]
    end

    %% =========================
    %% FLOWS
    %% =========================

    %% Data Sources -> Ingestion
    FOLDER --> WATCH
    NOTES --> WATCH
    SCREEN --> WATCH
    AUDIO --> WATCH

    WATCH --> QUEUE
    QUEUE --> INTAKE

    %% Ingestion -> Parsing
    INTAKE --> TXT
    INTAKE --> OCR
    INTAKE --> AUD

    %% Parsing -> Normalization & Enrichment
    TXT --> CLEAN
    OCR --> CLEAN
    AUD --> CLEAN

    CLEAN --> META
    META --> ENT
    ENT --> CAT
    CAT --> ACT
    ACT --> SUM

    SUM --> STRUCT
    META --> STRUCT
    ENT --> GRAPH
    SUM --> VECTOR

    %% Memory -> Retrieval/Reasoning
    STRUCT --> RETR
    VECTOR --> RETR
    GRAPH --> RETR
    INTENT --> RETR
    RETR --> CONTEXT
    CONTEXT --> LLM
    LLM --> VERIFY
    VERIFY --> CONF
    CONF --> BACKEND
    STRUCT --> BACKEND

    %% API -> Frontend
    BACKEND --> DASH
    DASH --> TIMELINE
    DASH --> CARDS
    DASH --> ACTIONS
    DASH --> CHAT
    CHAT --> SOURCE

    %% Observability
    BACKEND --> LOG
    BACKEND --> HEALTH
    CONF --> METRIC